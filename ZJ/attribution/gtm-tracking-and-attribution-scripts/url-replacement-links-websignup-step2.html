<script>
  function updateLinks() {
    var adjustTrackerUrl = localStorage.getItem('adjust_tracker_url');
    
    // Replace Android anchors
    var android_anchors = document.querySelectorAll("a[href^='https://play.google.com/store/apps/details?id=zenjob.android']");
    if (adjustTrackerUrl != null) {
      for (var i = 0; i < android_anchors.length; ++i) {
        var anchor = android_anchors[i];
        anchor.href = adjustTrackerUrl; 
      }
    } else {
      for (var i = 0; i < android_anchors.length; ++i) {
        android_anchors[i].href = 'https://app.adjust.com/rbvvy1h_6o2hpzv';
      }
    }
    
    // Replace iOS anchors
    var ios_anchors = document.querySelectorAll("a[href^='https://apps.apple.com/de/app/zenjob-flexible-nebenjobs/id1141020680']");
    if (adjustTrackerUrl != null) {
      for (var j = 0; j < ios_anchors.length; ++j) {
        var anchor = ios_anchors[j];
        anchor.href = adjustTrackerUrl;
      }
    } else {
      for (var j = 0; j < ios_anchors.length; ++j) {
        ios_anchors[j].href = 'https://app.adjust.com/rbvvy1h_6o2hpzv';
      }
    }

    // Replace Smartbanner__button anchors for Android
    var adjustTrackerUrlSmartBanner = localStorage.getItem('adjust_tracker_url_sb');

    var android_smartbanner_buttons = document.querySelectorAll("a[href*='https://play.google.com/store/apps/details?id=zenjob.android'][class*='smartbanner__button']");
    if (adjustTrackerUrlSmartBanner != null) {
      for (var k = 0; k < android_smartbanner_buttons.length; ++k) {
        var button = android_smartbanner_buttons[k];
        button.href = adjustTrackerUrlSmartBanner;
      }
    }

    // Replace Smartbanner__button anchors for iOS
    var ios_smartbanner_buttons = document.querySelectorAll("a[href*='https://apps.apple.com/de/app/zenjob-flexible-nebenjobs/id1141020680'][class*='smartbanner__button']");
    if (adjustTrackerUrlSmartBanner != null) {
      for (var l = 0; l < ios_smartbanner_buttons.length; ++l) {
        var button = ios_smartbanner_buttons[l];
        button.href = adjustTrackerUrlSmartBanner;
      }
    }
  }

  setTimeout(updateLinks, 1000);
</script>

<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>

<div id="qrcode"></div>
<script type="text/javascript">
  var adjustTrackerUrlQr = localStorage.getItem('adjust_tracker_url');

  // Replace existing QR code element
  var existingQrCodeElement = document.querySelector('.jss24');
  if (existingQrCodeElement) {
    if (adjustTrackerUrlQr) {
      var newQrCodeElement = document.createElement('div');
      existingQrCodeElement.parentNode.replaceChild(newQrCodeElement, existingQrCodeElement);

      var qrcode = new QRCode(newQrCodeElement, {
        text: adjustTrackerUrlQr,
        width: 250,
        height: 250,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
      });
    }
  } else {
    console.error('QR code element not found.');
  }
</script>
